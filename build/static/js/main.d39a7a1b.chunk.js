(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){},24:function(e,t,a){e.exports=a(39)},37:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(21),s=a.n(r),c=a(9),i=a.n(c),l=a(12),u=a(23),h=a(4),m=a(5),p=a(7),d=a(6),k=a(8),b=a(13),f="https://reactnd-books-api.udacity.com",v=localStorage.token;v||(v=localStorage.token=Math.random().toString(36).substr(-8));var g={Accept:"application/json",Authorization:v},y=function(e,t){return fetch("".concat(f,"/books/").concat(e.id),{method:"PUT",headers:Object(b.a)({},g,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},E=function(e){return fetch("".concat(f,"/search"),{method:"POST",headers:Object(b.a)({},g,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},j=(a(15),function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).getAuthors=function(){return"".concat(a.props.book.authors.map(function(e){return"".concat(e,", ")})).slice(0,"".concat(a.props.book.authors.map(function(e){return"".concat(e,", ")})).lastIndexOf(","))},a.handleChange=function(e){var t=a.props.book;t.shelf=e.target.value,void 0===a.props.moveBook?a.props.addBookFromSearch(t):a.props.moveBook(t)},a}return Object(k.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement("li",null,o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193}},void 0===this.props.book.imageLinks?o.a.createElement("p",{style:{textAlign:"center"}},"N/A"):o.a.createElement("img",{src:"".concat(this.props.book.imageLinks.thumbnail),style:{width:"100%",height:"100%"}})),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:this.handleChange,defaultValue:this.props.book.shelf},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"}),o.a.createElement("div",{className:"book-title"},this.props.book.title),o.a.createElement("div",{className:"book-authors"},void 0===this.props.book.authors?"no authors":1===this.props.book.authors.length?this.props.book.authors[0]:this.getAuthors())))}}]),t}(o.a.Component)),B=function(e){function t(){return Object(h.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},this.props.name),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},void 0!==this.props.shelfBooks&&this.props.shelfBooks.map(function(t){return o.a.createElement(j,{key:t.id,book:t,moveBook:e.props.moveBook})}))))}}]),t}(o.a.Component),O=a(10),w=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={result:[],notFound:"'Android', 'Art', 'Artificial Intelligence', 'Astronomy', 'Austen', 'Baseball', 'Basketball', 'Bhagat', 'Biography', 'Brief', 'Business', 'Camus', 'Cervantes', 'Christie', 'Classics', 'Comics', 'Cook', 'Cricket', 'Cycling', 'Desai', 'Design', 'Development', 'Digital Marketing', 'Drama', 'Drawing', 'Dumas', 'Education', 'Everything', 'Fantasy', 'Film', 'Finance', 'First', 'Fitness', 'Football', 'Future', 'Games', 'Gandhi', 'Homer', 'Horror', 'Hugo', 'Ibsen', 'Journey', 'Kafka', 'King', 'Lahiri', 'Larsson', 'Learn', 'Literary Fiction', 'Make', 'Manage', 'Marquez', 'Money', 'Mystery', 'Negotiate', 'Painting', 'Philosophy', 'Photography', 'Poetry', 'Production', 'Programming', 'React', 'Redux', 'River', 'Robotics', 'Rowling', 'Satire', 'Science Fiction', 'Shakespeare', 'Singh', 'Swimming', 'Tale', 'Thrun', 'Time', 'Tolstoy', 'Travel', 'Ultimate', 'Virtual Reality', 'Web Development', 'iOS'"},a.execute=function(){var e=Object(l.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t.target.value);case 2:void 0!==(n=e.sent)&&n.length>0&&(n=n.map(function(e){e.shelf="none";var t=a.props.existingBooks.find(function(t){return t.id===e.id});return t?Object(b.a)({},e,t):e}),a.setState({result:n}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(k.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(O.b,{className:"close-search",to:"/"},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:this.execute}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},this.state.result.length>0?this.state.result.map(function(t){return o.a.createElement(j,{key:t.id,book:t,addBookFromSearch:e.props.addBookFromSearch,changeAPI:e.props.changeAPI,cameFromSearch:!0})}):o.a.createElement("p",{style:{fontSize:"0.9em"}},"categories:",o.a.createElement("br",null),this.state.notFound))))}}]),t}(o.a.Component),N=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={books:[],currentlyReading:[],wantToRead:[],read:[]},a.getHeader=function(){return 0===a.props.books.length?"loading":"MyBooks"},a}return Object(k.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.getHeader();return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,e)),o.a.createElement("div",{className:"list-books-content"},o.a.createElement(B,{name:"Currently Reading",shelfBooks:this.props.currentlyReading,moveBook:this.props.moveBook}),o.a.createElement(B,{name:"Want To Read",shelfBooks:this.props.wantToRead,moveBook:this.props.moveBook}),o.a.createElement(B,{name:"Read",shelfBooks:this.props.read,moveBook:this.props.moveBook})),o.a.createElement(O.b,{to:"/search",className:"open-search"},o.a.createElement("button",null,"Add a book")))}}]),t}(o.a.Component),R=a(0),S=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={books:[],currentlyReading:[],wantToRead:[],read:[]},a.setShelves=function(e){var t=e.filter(function(e){return"currentlyReading"===e.shelf}),n=e.filter(function(e){return"wantToRead"===e.shelf}),o=e.filter(function(e){return"read"===e.shelf});a.setState({books:e,currentlyReading:t,wantToRead:n,read:o})},a.moveBook=function(e){a.changeAPI(e);var t=a.state.books.map(function(t){return t.id===e.id?e:t});a.setShelves(t)},a.addBookFromSearch=function(e){a.changeAPI(e);var t=a.state.books.filter(function(t){return t.id!==e.id?t:e});t=Object(u.a)(t).concat([e]),a.setShelves(t)},a}return Object(k.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(f,"/books"),{headers:g}).then(function(e){return e.json()}).then(function(e){return e.books});case 3:t=e.sent,this.setShelves(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Bad Network Connection, refresh the page");case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"changeAPI",value:function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t,t.shelf);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app"},o.a.createElement(R.c,null,o.a.createElement(R.a,{exact:!0,path:"/",render:function(){return o.a.createElement(N,{books:e.state.books,currentlyReading:e.state.currentlyReading,wantToRead:e.state.wantToRead,read:e.state.read,moveBook:e.moveBook})}}),o.a.createElement(R.a,{exact:!0,path:"/Search",render:function(){return o.a.createElement(w,{existingBooks:e.state.books,addBookFromSearch:e.addBookFromSearch,changeAPI:e.changeAPI,moveBook:e.moveBook})}})))}}]),t}(o.a.Component);a(37);s.a.render(o.a.createElement(O.a,null,o.a.createElement(S,null)),document.getElementById("root"))}},[[24,2,1]]]);
//# sourceMappingURL=main.d39a7a1b.chunk.js.map